{% extends "layout.html" %}
{% block content %}
<div class="container">
    <h3>User Area</h3>
    <h3>Hi <a link href="{{ url_for('user_page') }}">{{ username }}</a></h3>
    {% if img_link %}
    <img src={{ img_link }} style="width:120px; height:120px">
    {% endif %}
</div>
<br>
<div class="container">
    <h3>Message posting</h3>
    <form method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <input class="form-control" type="text" id="subject" name="subject" placeholder="Subject" required>
        </div>
        <div class="form-group">
            <label for="message">Enter message</label>
            <textarea class="form-control" id="message" name="message" rows="3"></textarea>
        </div>
        <div class="form-group">
            <label for="msg_img">Upload picture</label>
            <input type="file" name="msg_img" id="msg_img">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    {% if err %}
    <p>{{ err }}</p>
    {% endif %}
</div>

<br>

<div class="container">
    <h3>See Messages</h3>
    {% for post in posts %}
    <div class="card">
        <h5 class="card-header">User : {{ post['user_name'] }}</h5>
        <div class="card-body">
            <h5 class="card-title">Subject : {{ post['subject'] }}</h5>
            <p>User image : <img src={{ post['user_img_link'] }} style="width:120px; height:120px"</p>
            <p class="card-text">Message : {{ post['message'] }}</p>
            <p>Post image : <img src={{ post['img_link'] }} style="width:120px; height:120px"></p>
            <p class="card-test">{{ post['datetime'] }}</p>
        </div>
    </div>
    {% endfor %}
    <br>
</div>
<br>
{% endblock %}